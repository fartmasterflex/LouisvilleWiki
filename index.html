<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#111111">
    <link rel="manifest" href="manifest.json">
    
    <title>The Louisville Wiki</title>
    
    <!-- Library for exporting image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="app">
    <header>
        <h1>The<br>Louisville<br>Wiki</h1>
        <div class="subtitle">by Fartmaster Flex</div>
    </header>
    <main id="content-area"></main>
    <footer>
        <span style="background:black; color:white; padding: 2px 6px;">keep Louisville weird, pls</span>
        <div id="secretBoat" onclick="startBoatRace()" style="cursor:pointer; display:inline-block; margin-left:15px; opacity:0.3; font-size: 1.2rem;" title="???">ðŸš¢</div>
    </footer>
</div>

<!-- MODALS -->

<!-- Bracket Selector Modal -->
<div id="selectorModal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-close" onclick="closeModal('selectorModal')">Ã—</div>
        <div class="selector-header">
            <h3>Custom Bracket Maker</h3>
            <p style="font-size: 0.8rem; margin:0 0 10px 0;">Pick a category, choose your Sweet 16, and battle it out.</p>
            <select id="bracketCategoryDropdown" class="dropdown-tool" onchange="changeBracketCategory()" style="width: 100%;">
                <!-- Options populated dynamically -->
            </select>
            <br>
            <div id="selectorCounter" class="selector-counter">0/16</div>
        </div>
        <div id="selectorList" class="selector-list"></div>
        <div id="makeBracketArea" style="text-align:center; padding-top:10px; display:none;">
            <button class="btn-tool" onclick="generateBracket()" style="width:100%;">Generate Bracket!</button>
        </div>
    </div>
</div>

<!-- Bracket View Modal -->
<div id="bracketModal" class="modal-overlay">
    <div class="modal-box large" style="background:#222; border-color:#888;">
        <div class="modal-close" style="color:#fff;" onclick="closeModal('bracketModal')">Ã—</div>
        <div id="bracketCaptureArea" class="bracket-capture-area">
            <h2 id="bracketTitleDisplay" style="text-align:center; color:var(--highlight); margin:5px 0; font-size:1.5rem; text-transform: uppercase;">SWEET 16</h2>
            <div id="bracketView" class="bracket-container"></div>
            <div style="text-align:center; font-size:10px; color:#666; margin-top:5px;">generated by The Louisville Wiki</div>
        </div>
        <div id="shareControls" style="text-align: center; margin: 10px; display: none;">
            <button class="btn-tool" onclick="downloadBracket()">Save Bracket Image</button>
        </div>
    </div>
</div>

<!-- Dive Bar Crawl Modal -->
<div id="crawlModal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-close" onclick="closeModal('crawlModal')">Ã—</div>
        <h2 style="text-align:center; text-transform:uppercase; margin-top:0;">Dive Bar Crawl</h2>
        <p style="text-align:center; font-size:0.9rem;">3 Gritty Bars. 1 Neighborhood. Walkable(ish).</p>
        <div class="crawl-box">
            <div style="font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; color:#666;">NEIGHBORHOOD:</div>
            <div id="crawlNeighborhood" style="font-size: 1.5rem; font-weight: 900; text-transform: uppercase; margin-bottom: 15px;">---</div>
            <div id="crawlBars">
                <span class="crawl-bar">---</span>
                <span class="crawl-bar">---</span>
                <span class="crawl-bar">---</span>
            </div>
        </div>
        <button class="btn-tool" onclick="generateCrawl()">Generate New Route</button>
    </div>
</div>

<!-- Night Out Slot Modal -->
<div id="slotModal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-close" onclick="closeModal('slotModal')">Ã—</div>
        <h2 style="text-align:center; text-transform:uppercase; margin-top:0;">Perfect Night Out</h2>
        <div class="slot-container">
            <div class="slot-box"><span class="slot-label">THE ACTIVITY</span><span id="slot1">---</span></div>
            <div class="slot-box"><span class="slot-label">THE DINNER</span><span id="slot2">---</span></div>
            <div class="slot-box"><span class="slot-label">THE LATE NIGHT</span><span id="slot3">---</span></div>
        </div>
        <button class="btn-tool" id="spinBtn" onclick="spinSlots()">Pull Lever</button>
    </div>
</div>

<!-- Bingo Modal -->
<div id="bingoModal" class="modal-overlay">
    <div class="modal-box" style="width: 500px;">
        <div class="modal-close" onclick="closeModal('bingoModal')">Ã—</div>
        <h2 style="text-align:center; text-transform:uppercase; margin-top:0;">Weird Louisville Bingo</h2>
        
        <div id="bingoBoard" class="bingo-grid"></div>
        
        <div style="margin-top: 15px; border-top: 2px dashed #ccc; padding-top: 15px;">
            <div style="font-size:0.8rem; font-weight:bold;">Add Custom Square:</div>
            <div class="bingo-input-area">
                <input type="text" id="customBingoInput" class="bingo-input" placeholder="e.g. See the Pope Lick Monster" maxlength="40">
                <button class="btn-tool" onclick="addBingoItem()" style="flex:0;">Add</button>
            </div>
        </div>
        <div style="margin-top: 10px; display: flex; gap:10px;">
            <button class="btn-tool" onclick="generateBingo()">Reshuffle Board</button>
            <button class="btn-map" onclick="resetCustomBingo()" style="flex: 0.5; font-size: 0.7rem;">Clear Custom</button>
        </div>
    </div>
</div>

<!-- EXTERNAL SCRIPTS -->
<script src="library_data.js"></script>
<script src="app.js"></script>

</body>
</html>
